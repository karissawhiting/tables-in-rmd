---
title: "Examples with {huxtable}"
date: "`r format(Sys.time(), '%B %d, %Y')`"
knit: (function(inputFile, encoding) {
    rmarkdown::render(inputFile, 
    output_dir = here::here("outputs"))
     })
output:
  pdf_document
---


```{r setup, include=FALSE}

knitr::opts_chunk$set(echo = TRUE)

library(palmerpenguins)
library(tidyverse)
library(huxtable)
library(gtsummary)
library(labelled)

data(penguins)

penguins <- penguins %>%
  bstfun::use_varnames_as_labels()

```

# Print a plain dataframe 

```{r }
df <- penguins %>% 
  head(n =10)

df %>% huxtable()

```



# Print a Plain Dataframe 

```{r }
penguins %>% 
  tbl_summary() %>%
  bold_labels() %>%
  italicize_levels() %>%
  as_hux_table()
```

# {gtsummary} Examples

## Default Print Engine

Example where we don't specify print engine:

```{r}
penguins %>% 
  tbl_summary() %>%
  bold_labels() %>%
  italicize_levels()
```

## Specify Print Engine

```{r}
penguins %>% 
  tbl_summary() %>%
  bold_labels() %>%
  italicize_levels() %>%
  as_hux_table()
```

## With Compact Theme

```{r}
theme_gtsummary_compact()

penguins %>% 
  tbl_summary() %>%
  bold_labels() %>%
  italicize_levels() %>%
  as_hux_table()

reset_gtsummary_theme()
```

## Add Header

```{r}
penguins %>% 
  tbl_summary() %>%
  bold_labels() %>%
  italicize_levels()  %>%
  as_hux_table() %>%
  set_caption("Title") 

```


## Add Footnotes 

```{r}

x <- penguins %>% 
  tbl_summary() %>%
  bold_labels() %>%
  italicize_levels() %>%
  as_hux_table() %>%
  add_footnote(.,
               text = "Custom Footnote")


```


## Highlight Specific Values

Two ways to do this below:

```{r}
x <- penguins %>% 
  tbl_summary() %>%
  bold_labels() %>%
  italicize_levels()  %>%
  as_hux_table() %>%
  set_caption("Title") 

x %>%
  set_text_color(
    c(1:2, 4:5, 12,14, 16:17, 19:21), 2,
    "purple")
```


```{r}
x %>%
  mutate(new_cond = parse_number(stat_0)) %>%
  set_text_color(
    row = .$new_cond >= 100, 2,  "purple") %>%
  select(-new_cond)
```

## Merged Tables with Spanning Headers

```{r}
sum <- penguins %>%
  select(species, island, sex) %>%
  tbl_summary(by = species) %>%
  add_p()


reg <- glm(species ~ island + sex, family = binomial(), data = penguins)

reg <- reg %>%
  tbl_regression()

tbl_merge(list(sum, reg),
          tab_spanner = c("**Summary Statistics**", "**Regression***")) %>% 
  
  as_hux_table()

```

# Saving Quickly 